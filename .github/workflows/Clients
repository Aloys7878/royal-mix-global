// client: call signature endpoint then upload
async function getSignature() {
  const res = await fetch(process.env.CLOUDINARY_SIGNATURE_URL);
  return res.json();
}

async function uploadFile(uri) {
  const sig = await getSignature();
  const form = new FormData();
  form.append('file', { uri, type: 'image/jpeg', name: 'file.jpg' });
  form.append('timestamp', sig.timestamp.toString());
  form.append('signature', sig.signature);
  form.append('api_key', sig.api_key);
  form.append('upload_preset', sig.upload_preset);
  const upload = await fetch(`https://api.cloudinary.com/v1_1/${sig.cloud_name}/image/upload`, { method: 'POST', body: form });
  return upload.json();
}
